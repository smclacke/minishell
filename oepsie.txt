1) 

➜  shellely git:(djoyke) ✗ ./minishell 
minishell:echo | | echo

minishell:echo || echo
minishell: syntax error nothing after pipe

minishell:echo | | echo

minishell:echo || echo
minishell: syntax error nothing after pipe

minishell:echo | | echo

minishell:echo | | | echo

minishell:echo | | | ls
include  Makefile  minishell  obj  out  src


2)

after 2x syntax error or syntax error followed  up by another command

minishell:>>>> 
minishell: syntax error near unexpected token 'newline'
minishell:>>>>
minishell: syntax error near unexpected token 'n ewline'
minishell:
exit

	probably freeing after giving syntax error would fix this


=================================================================

=================================================================
==848822==ERROR: LeakSanitizer: detected memory leaks
==848823==ERROR: LeakSanitizer: detected memory leaks


Direct leak of 360 byte(s) in 9 object(s) allocated from:
Direct leak of 360 byte(s) in 9 object(s) allocated from:
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #1 0x4cdfc8 in lexer /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:109:19
    #1 0x4cdfc8 in lexer /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:109:19
    #2 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #2 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #3 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10
    #3 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10
    #4 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #4 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #5 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16
    #5 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16


Indirect leak of 122 byte(s) in 34 object(s) allocated from:
Indirect leak of 122 byte(s) in 34 object(s) allocated from:
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #1 0x4e593f in ft_substr (/home/dreijans/Documents/rank3/shellely/minishell+0x4e593f)
    #1 0x4e593f in ft_substr (/home/dreijans/Documents/rank3/shellely/minishell+0x4e593f)
    #2 0x4ce70c in split_tokens /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:68:10
    #2 0x4ce70c in split_tokens /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:68:10
    #3 0x4ce3f2 in lexer_split /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:90:14
    #3 0x4ce3f2 in lexer_split /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:90:14
    #4 0x4cdff8 in lexer /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:112:10
    #4 0x4cdff8 in lexer /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:112:10
    #5 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #5 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #6 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10
    #6 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10
    #7 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #7 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #8 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16
    #8 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16


Indirect leak of 2 byte(s) in 2 object(s) allocated from:

=================================================================
Indirect leak of 2 byte(s) in 2 object(s) allocated from:
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
==848817==ERROR: LeakSanitizer: detected memory leaks
    #1 0x4e5a5a in ft_strdup (/home/dreijans/Documents/rank3/shellely/minishell+0x4e5a5a)
    #1 0x4e5a5a in ft_strdup (/home/dreijans/Documents/rank3/shellely/minishell+0x4e5a5a)

    #2 0x4e58ff in ft_substr (/home/dreijans/Documents/rank3/shellely/minishell+0x4e58ff)
    #2 0x4e58ff in ft_substr (/home/dreijans/Documents/rank3/shellely/minishell+0x4e58ff)
    #3 0x4ce70c in split_tokens /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:68:10
Direct leak of 360 byte(s) in 9 object(s) allocated from:
    #3 0x4ce70c in split_tokens /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:68:10
    #4 0x4ce3f2 in lexer_split /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:90:14
    #5 0x4cdff8 in lexer /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:112:10
    #4 0x4ce3f2 in lexer_split /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:90:14
    #5 0x4cdff8 in lexer /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:112:10
    #6 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #6 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #7 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10
    #1 0x4cdfc8 in lexer /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:109:19
    #7 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10
    #8 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #2 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #8 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #9 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16
    #3 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10

    #9 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16
    #4 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12

SUMMARY: AddressSanitizer: 484 byte(s) leaked in 45 allocation(s).
SUMMARY: AddressSanitizer: 484 byte(s) leaked in 45 allocation(s).
    #5 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

Indirect leak of 122 byte(s) in 34 object(s) allocated from:
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #1 0x4e593f in ft_substr (/home/dreijans/Documents/rank3/shellely/minishell+0x4e593f)
    #2 0x4ce70c in split_tokens /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:68:10➜  shellely git:(djoyke) ✗ ./minishell
minishell:export 1ads=ads
minishell: export: `1ads': not a valid identifier
minishell:env |grep ads
minishell:export 1ads=ads asd=asd
minishell: export: `1ads': not a valid identifier
minishell:env |grep ads
1ads=ads
    #5 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #6 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10
    #7 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #8 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

Indirect leak of 2 byte(s) in 2 object(s) allocated from:
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #1 0x4e5a5a in ft_strdup (/home/dreijans/Documents/rank3/shellely/minishell+0x4e5a5a)
    #2 0x4e58ff in ft_substr (/home/dreijans/Documents/rank3/shellely/minishell+0x4e58ff)
    #3 0x4ce70c in split_tokens /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:68:10
    #4 0x4ce3f2 in lexer_split /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:90:14
    #5 0x4cdff8 in lexer /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:112:10
    #6 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #7 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10
    #8 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #9 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

SUMMARY: AddressSanitizer: 484 byte(s) leaked in 45 allocation(s).

=================================================================
==848819==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 360 byte(s) in 9 object(s) allocated from:
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #1 0x4cdfc8 in lexer /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:109:19
    #2 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #3 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10
    #4 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #5 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

Indirect leak of 122 byte(s) in 34 object(s) allocated from:
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #1 0x4e593f in ft_substr (/home/dreijans/Documents/rank3/shellely/minishell+0x4e593f)
    #2 0x4ce70c in split_tokens /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:68:10
    #3 0x4ce3f2 in lexer_split /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:90:14
    #4 0x4cdff8 in lexer /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:112:10
    #5 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #6 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10
    #7 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #8 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

Indirect leak of 2 byte(s) in 2 object(s) allocated from:
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #1 0x4e5a5a in ft_strdup (/home/dreijans/Documents/rank3/shellely/minishell+0x4e5a5a)
    #2 0x4e58ff in ft_substr (/home/dreijans/Documents/rank3/shellely/minishell+0x4e58ff)
    #3 0x4ce70c in split_tokens /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:68:10
    #4 0x4ce3f2 in lexer_split /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:90:14
    #5 0x4cdff8 in lexer /home/dreijans/Documents/rank3/shellely/src/lexer/lexer.c:112:10
    #6 0x4cf94c in parse_input /home/dreijans/Documents/rank3/shellely/src/parser/parser.c:112:11
    #7 0x4cb530 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:26:10
    #8 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #9 0x7fa0edcd0d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

SUMMARY: AddressSanitizer: 484 byte(s) leaked in 45 allocation(s).








!!!!!!!!!!!!!!!!!!looks like it's fixed but want to test again after I think we're done!!!!!!!!!!!!

SUMMARY: AddressSanitizer: bad-free (/home/dreijans/Documents/rank3/shellely/minishell+0x49a002) in free
==852536==ABORTING

declare -x asd="==================================asd"
declare -x asd="==================================asd"
declare -x f="asd"
minishell:export asd=sad
minishell:export asd=sad
minishell:export asd=sad
minishell:export asd=sad
minishell:export asd=sad
minishell:export asd=sad
minishell:export asd=sad
minishell:export
declare -x GJS_DEBUG_TOPICS="JS ERROR;JS LOG"
declare -x LANGUAGE="en"
declare -x LC_TIME="nl_NL.UTF-8"
declare -x USER="dreijans"
declare -x XDG_SESSION_TYPE="x11"
declare -x SHLVL="1"
declare -x HOME="/home/dreijans"
declare -x DESKTOP_SESSION="ubuntu"
declare -x GIO_LAUNCHED_DESKTOP_FILE="/usr/share/applications/code.desktop"
declare -x GTK_MODULES="gail:atk-bridge"
declare -x FEH_PID="840429"
declare -x XDG_SEAT_PATH="/org/freedesktop/DisplayManager/Seat0"
declare -x LC_CTYPE="en_US.UTF-8"
declare -x LC_MONETARY="nl_NL.UTF-8"
declare -x MANAGERPID="840358"
declare -x SYSTEMD_EXEC_PID="841020"
declare -x DBUS_SESSION_BUS_ADDRESS="unix:path=/run/user/112374/bus"
declare -x LIBVIRT_DEFAULT_URI="qemu:///system"
declare -x YAD_PID="840847"
declare -x GIO_LAUNCHED_DESKTOP_FILE_PID="841861"
declare -x MANDATORY_PATH="/usr/share/gconf/ubuntu.mandatory.path"
declare -x LOGNAME="dreijans"
declare -x GTK_IM_MODULE="ibus"
declare -x JOURNAL_STREAM="8:1906480"
declare -x DEFAULTS_PATH="/usr/share/gconf/ubuntu.default.path"
declare -x XDG_SESSION_CLASS="user"
declare -x FT_HOOK_PATHNAME="login-user.d"
declare -x GNOME_DESKTOP_SESSION_ID="this-is-deprecated"
declare -x LC_COLLATE="en_US.UTF-8"
declare -x PATH="/home/dreijans/bin:/home/dreijans/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/dreijans/.dotnet/tools"
declare -x SESSION_MANAGER="local/f0r3s25.codam.nl:@/tmp/.ICE-unix/841002,unix/f0r3s25.codam.nl:/tmp/.ICE-unix/841002"
declare -x INVOCATION_ID="9c3c5e5a89344f70839dbd2aae259505"
declare -x LC_ADDRESS="nl_NL.UTF-8"
declare -x XDG_RUNTIME_DIR="/run/user/112374"
declare -x XDG_MENU_PREFIX="gnome-"
declare -x XDG_SESSION_PATH="/org/freedesktop/DisplayManager/Session0"
declare -x DISPLAY=":0"
declare -x LANG="en_US.UTF-8"
declare -x LC_TELEPHONE="nl_NL.UTF-8"
declare -x DOTNET_BUNDLE_EXTRACT_BASE_DIR="/home/dreijans/.cache/dotnet_bundle_extract"
declare -x XDG_CURRENT_DESKTOP="Unity"
declare -x XAUTHORITY="/home/dreijans/.Xauthority"
declare -x XDG_SESSION_DESKTOP="ubuntu"
declare -x XMODIFIERS="@im=ibus"
declare -x LC_MESSAGES="en_US.UTF-8"
declare -x SSH_AGENT_LAUNCHER="gnome-keyring"
declare -x SSH_AUTH_SOCK="/run/user/112374/keyring/ssh"
declare -x XDG_GREETER_DATA_DIR="/var/lib/lightdm-data/dreijans"
declare -x LC_NAME="nl_NL.UTF-8"
declare -x SHELL="/bin/zsh"
declare -x KRB5CCNAME="FILE:/tmp/krb5cc_112374_ybPCvR"
declare -x QT_ACCESSIBILITY="1"
declare -x GDMSESSION="ubuntu"
declare -x LC_MEASUREMENT="nl_NL.UTF-8"
declare -x FT_HOOK_NAME="login-user"
declare -x LC_IDENTIFICATION="nl_NL.UTF-8"
declare -x GPG_AGENT_INFO="/run/user/112374/gnupg/S.gpg-agent:0:1"
declare -x GJS_DEBUG_OUTPUT="stderr"
declare -x QT_IM_MODULE="ibus"
declare -x LC_ALL=""
declare -x PWD="/home/dreijans/Documents/rank3/shellely"
declare -x XDG_DATA_DIRS="/usr/share/ubuntu:/usr/share/gnome:/home/dreijans/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:/usr/local/share:/usr/share:/var/lib/snapd/desktop"
declare -x XDG_CONFIG_DIRS="/etc/xdg/xdg-ubuntu:/etc/xdg"
declare -x LC_NUMERIC="nl_NL.UTF-8"
declare -x LC_PAPER="nl_NL.UTF-8"
declare -x CHROME_DESKTOP="code-url-handler.desktop"
declare -x ORIGINAL_XDG_CURRENT_DESKTOP="ubuntu:GNOME"
declare -x GDK_BACKEND="x11"
declare -x OLDPWD="/home/dreijans/Documents/rank3/shellely/src"
declare -x DOCKER_HOST="unix:///run/user/112374/docker.sock"
declare -x ZSH="/home/dreijans/.oh-my-zsh"
declare -x PAGER="less"
declare -x LESS="-R"
declare -x LSCOLORS="Gxfxcxdxbxegedabagacad"
declare -x LS_COLORS="rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:"
declare -x _="/home/dreijans/Documents/rank3/shellely/./minishell"
declare -x TERM_PROGRAM="vscode"
declare -x TERM_PROGRAM_VERSION="1.86.1"
declare -x COLORTERM="truecolor"
declare -x GIT_ASKPASS="/usr/share/code/resources/app/extensions/git/dist/askpass.sh"
declare -x VSCODE_GIT_ASKPASS_NODE="/usr/share/code/code"
declare -x VSCODE_GIT_ASKPASS_EXTRA_ARGS=""
declare -x VSCODE_GIT_ASKPASS_MAIN="/usr/share/code/resources/app/extensions/git/dist/askpass-main.js"
declare -x VSCODE_GIT_IPC_HANDLE="/run/user/112374/vscode-git-9789b70794.sock"
declare -x VSCODE_INJECTION="1"
declare -x ZDOTDIR="/home/dreijans"
declare -x USER_ZDOTDIR="/home/dreijans"
declare -x TERM="xterm-256color"
declare -x asd="sad"
=================================================================
==856710==ERROR: AddressSanitizer: heap-use-after-free on address 0x602000003eb0 at pc 0x00000043d178 bp 0x7ffca7fe7410 sp 0x7ffca7fe6b90
READ of size 2 at 0x602000003eb0 thread T0
    #0 0x43d177 in printf_common(void*, char const*, __va_list_tag*) (/home/dreijans/Documents/rank3/shellely/minishell+0x43d177)
    #1 0x43e4be in printf (/home/dreijans/Documents/rank3/shellely/minishell+0x43e4be)
    #2 0x4dc4c3 in export_print /home/dreijans/Documents/rank3/shellely/src/builtin/export.c:26:4
    #3 0x4dbc61 in ft_export /home/dreijans/Documents/rank3/shellely/src/builtin/export.c:95:3
    #4 0x4dd42d in do_builtin /home/dreijans/Documents/rank3/shellely/src/builtin/builtin_utils_one.c:40:3
    #5 0x4e2581 in single_builtin_cmd /home/dreijans/Documents/rank3/shellely/src/executor/execute_utils_two.c:36:4
    #6 0x4df440 in build /home/dreijans/Documents/rank3/shellely/src/executor/execute.c:125:6
    #7 0x4df294 in execute /home/dreijans/Documents/rank3/shellely/src/executor/execute.c:147:2
    #8 0x4cb5c4 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:31:2
    #9 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #10 0x7f2e5ad70d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16
    #11 0x7f2e5ad70e3f in __libc_start_main csu/../csu/libc-start.c:392:3
    #12 0x41f3a4 in _start (/home/dreijans/Documents/rank3/shellely/minishell+0x41f3a4)

0x602000003eb0 is located 0 bytes inside of 4-byte region [0x602000003eb0,0x602000003eb4)
freed by thread T0 here:
    #0 0x49a002 in free (/home/dreijans/Documents/rank3/shellely/minishell+0x49a002)
    #1 0x4dd9f5 in replace_node /home/dreijans/Documents/rank3/shellely/src/builtin/builtin_utils_one.c:118:2
    #2 0x4dcad9 in reassign_env /home/dreijans/Documents/rank3/shellely/src/builtin/export.c:48:4
    #3 0x4dc1d2 in ft_export /home/dreijans/Documents/rank3/shellely/src/builtin/export.c:111:7
    #4 0x4dd42d in do_builtin /home/dreijans/Documents/rank3/shellely/src/builtin/builtin_utils_one.c:40:3
    #5 0x4e2581 in single_builtin_cmd /home/dreijans/Documents/rank3/shellely/src/executor/execute_utils_two.c:36:4
    #6 0x4df440 in build /home/dreijans/Documents/rank3/shellely/src/executor/execute.c:125:6
    #7 0x4df294 in execute /home/dreijans/Documents/rank3/shellely/src/executor/execute.c:147:2
    #8 0x4cb5c4 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:31:2
    #9 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #10 0x7f2e5ad70d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

previously allocated by thread T0 here:
    #0 0x49a26d in malloc (/home/dreijans/Documents/rank3/shellely/minishell+0x49a26d)
    #1 0x4cdba3 in mini_malloc /home/dreijans/Documents/rank3/shellely/src/utils/cleanup.c:103:9
    #2 0x4cd98d in mini_substr /home/dreijans/Documents/rank3/shellely/src/utils/cleanup.c:38:8
    #3 0x4dfb79 in get_key_value /home/dreijans/Documents/rank3/shellely/src/executor/make_env.c:60:10
    #4 0x4dbf9e in ft_export /home/dreijans/Documents/rank3/shellely/src/builtin/export.c:104:19
    #5 0x4dd42d in do_builtin /home/dreijans/Documents/rank3/shellely/src/builtin/builtin_utils_one.c:40:3
    #6 0x4e2581 in single_builtin_cmd /home/dreijans/Documents/rank3/shellely/src/executor/execute_utils_two.c:36:4
    #7 0x4df440 in build /home/dreijans/Documents/rank3/shellely/src/executor/execute.c:125:6
    #8 0x4df294 in execute /home/dreijans/Documents/rank3/shellely/src/executor/execute.c:147:2
    #9 0x4cb5c4 in run_minishell /home/dreijans/Documents/rank3/shellely/src/main.c:31:2
    #10 0x4cb350 in main /home/dreijans/Documents/rank3/shellely/src/main.c:105:12
    #11 0x7f2e5ad70d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16

SUMMARY: AddressSanitizer: heap-use-after-free (/home/dreijans/Documents/rank3/shellely/minishell+0x43d177) in printf_common(void*, char const*, __va_list_tag*)
Shadow bytes around the buggy address:
  0x0c047fff8780: fa fa fd fd fa fa fd fa fa fa fd fa fa fa 00 04
  0x0c047fff8790: fa fa 07 fa fa fa fd fd fa fa fd fa fa fa fd fd
  0x0c047fff87a0: fa fa fd fa fa fa fd fd fa fa fd fd fa fa fd fa
  0x0c047fff87b0: fa fa fd fa fa fa fd fa fa fa 01 fa fa fa 00 04
  0x0c047fff87c0: fa fa fd fa fa fa fd fa fa fa fd fd fa fa fd fa
=>0x0c047fff87d0: fa fa fd fa fa fa[fd]fa fa fa 06 fa fa fa 02 fa
  0x0c047fff87e0: fa fa 04 fa fa fa fd fd fa fa fd fd fa fa fd fa
  0x0c047fff87f0: fa fa fd fa fa fa 00 04 fa fa 07 fa fa fa fd fd
  0x0c047fff8800: fa fa fd fa fa fa fd fd fa fa fd fa fa fa fd fd
  0x0c047fff8810: fa fa fd fd fa fa fd fa fa fa fd fa fa fa fd fd
  0x0c047fff8820: fa fa 00 04 fa fa 00 07 fa fa fd fa fa fa fd fa
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
  Shadow gap:              cc
==856710==ABORTING

--------------------------------------------

➜  shellely git:(djoyke) ✗ ./minishell
minishell:cd
minishell:unset OLDPWD
minishell:cd -
minishell: cd: OLDPWD not set
minishell:cd Desktop/
minishell:cd -